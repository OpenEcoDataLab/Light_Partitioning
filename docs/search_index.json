[["index.html", "Light partitioning Part 1 Tiny intro 1.1 Workflow", " Light partitioning Dr. Matthew Ross Dr. Jim Jawitz Dr. Matt Cohen January 13, 2022 Part 1 Tiny intro Water clarity and its components (chlorophyll a, total suspended sediment, and dissolved organic carbon) are among the most functionally important and socially-relevant aspects of water quality. Here we propose a method for systematically evaluating the relative contribution of each water clarity component to total clarity. We further borrow a visualization tool from soil analyses, the ternary diagram. We build ternary diagrams that partition light partitioning between DOC, algal cells, and non-algal particles. 1.1 Workflow In its simplest form our workflow is: Download all of AquaSat and join disparate AquaSat pieces together Investigate data quality of AquaSat and select a subset of data where chl-a, doc, tss, and secchi were all measured simultaneously Investigate the relationship between chl-a, tis (inorganic sediment), non-algal particles (dead particles), and algae biomass to build a dataset of algal biomass, non-algal particle mass, and dissolved organic carbon mass. Build a model that predicts light extinction (1.4/secchi) using algal particles, non-algal particles, and doc. Use this model to extract light extinction coefficients for each parameter, apply this model to visualizations in ternary space Explore systematic controls on relative contribution to light extinction over space and time across CONUS. "],["download.html", "Part 2 Download 2.1 AquaSat download 2.2 AquaSat Read", " Part 2 Download I recognize that I should probably just use targets for this part, but I (Matt Ross) dont know how to use targets yet! So, instead we are just going to have a code chunk here that just downloads all the data directly from figshare, and the chunk will just be set to eval = FALSE, so it wont run unless you manually run it. That way this book can run in reasonable timeframes, most other chunks will run based on cacheing. Though, some data intensive tasks, will also simply have eval = F to save runtime. These chunks will be flagged explicitly, and all their data products saved to a data/out folder. 2.1 AquaSat download AquaSat is held in a figshare collection with many pieces. For this work we will need most of the data held there, which we will access through direct download. The URLs are just from the AquaSat collection links. ## AquaSat Download data. This takes &gt; 2 hours, ## so only run if you think ## AquaSat has been updated! ## Also ## In-situ raw data with methods download.file(&#39;https://figshare.com/ndownloader/files/15475154&#39;, mode = &#39;wb&#39;,# Needs to be written in binary for some reason destfile = &#39;data/in/aq_situ.zip&#39;) unzip(&#39;data/in/aq_situ.zip&#39;,exdir = &#39;data/in/aq_situ&#39;) # Site Inventory with type, because it&#39;s not in the other inventory # Stupid aquasat developer (me/mattross!) download.file(&#39;https://figshare.com/ndownloader/files/24720434&#39;, mode = &#39;wb&#39;, destfile = &#39;data/in/inv.feather&#39;) ## Unique site inventory download.file(&#39;https://figshare.com/ndownloader/files/24720437&#39;, mode = &#39;wb&#39;, destfile = &#39;data/in/unq_site.feather&#39;) ## Ecoregion data download.file(&#39;https://gaftp.epa.gov/EPADataCommons/ORD/Ecoregions/cec_na/na_cec_eco_l2.zip&#39;, destfile = &#39;data/in/eco2.zip&#39;) unzip(&#39;data/in/eco2.zip&#39;,exdir = &#39;data/in/ecoregion&#39;) 2.2 AquaSat Read inv_type &lt;- read_feather(&#39;C:/Users/mrvr/Dropbox/UNC-PostDocAll/aquasat/1_wqdata/out/wqp_inventory.feather&#39;) %&gt;% select(SiteID = MonitoringLocationIdentifier, type = ResolvedMonitoringLocationTypeName) %&gt;% mutate(type = ifelse(grepl(&#39;Lake&#39;,type),&#39;Lake&#39;,type)) site.vis &lt;- read_feather(&#39;C:/Users/mrvr/Dropbox/UNC-PostDocAll/aquasat/2_rsdata/out/unique_site_inventory.feather&#39;) %&gt;% inner_join(inv_type) %&gt;% distinct(SiteID,lat,long,type) in.vis &lt;- read_feather(&#39;C:/Users/mrvr/Dropbox/UNC-PostDocAll/aquasat/1_wqdata/out/wqp_lagos_unity.feather&#39;) "],["404.html", "Page not found", " Page not found The page you requested cannot be found (perhaps it was moved or renamed). You may want to try searching to find the page's new location, or use the table of contents to find the page you are looking for. "]]
